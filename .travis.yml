language: node_js
node_js:
  - 14
os: linux
cache: npm
dist: trusty
sudo: false

install:
  - "cd music/"
  - "npm install"

stages:
  - "NPM BUILD"
  - "DEPLOY PROD"

jobs:
  include:
    - stage: "NPM BUILD"
      script:
        - "npm run build"
    - stage: "DEPLOY PROD"
      script:
        - "cd build && find . -type f -exec curl --ftp-create-dirs -T {} ${SFTP_URL}{} --user ${SFTP_USER}:${SFTP_PASSWORD ;"

